{% extends 'releases/base.html' %}

{% load image_previewfile %}

{% block content %}
    <article class="game">
        <div class="coverimage">
            <img src="https://archive.org/download/{{ release.archivelink }}/{{ release.coverfilename }}">
        </div>        
        {% if release.published_date %}
            <time class="date">
                {{ release.published_date }}
            </time>
        {% endif %}
        <h1><a href="{% url 'game_detail' pk=gameid.pk %}">{{ release.title }}</a> ({{ release.year }} - {{ release.get_media_display }})</h1>
        {% if release.ogdblink is not None %}
            <h5><a href="{{ release.ogdblink }}">Release on OGDB</a></h5>
        {% endif %}        
        <h5>Developer: {{ release.developer }}</h5>
        <h5>Publisher: {{ release.publisher }}</h5>
        <br />
        <br />
        <h4>Infos:</h4>
        <h5>Sprachausgabe: {{ release.speech }}</h5>
        <h5>Texte: {{ release.text }}</h5>
        <p></p>
        <p>{{ release.content|linebreaksbr }}</p>
        <br />
        {% if release.rawfile is not None %}
        <h5>Raw-Files: <a href="https://archive.org/download/{{ release.archivelink }}/{{ release.rawfile }}">Download</a></h5>
        <br />
        {% endif %}
        <br />
        {% if user.is_authenticated %}
        <h4>Disks/Discs:</h4>
        <table class="disks">
            {% for disk in disks %}
                <tr>
                    <td style="vertical-align: top">{{ disk.get_disktype_display }} - <a href="https://timberserver.de/gddb/{{ release.archivelink }}/{{ disk.diskfilename }}">Download Images</a></td>
                </tr>                        
            {% endfor %}
        </table>
        <br />
        <br />
        {% endif %}
        <h4>Extras:</h4>
        <table class="extras">
            {% for extra in extras %}
            <tr>
                <td>{% if extra.extratypedescr %}{{ extra.extratypedescr }}{% else %}{{ extra.get_extratype_display }}{% endif %} - <a href="https://archive.org/download/{{ release.archivelink }}/{{ extra.extrafilename }}">Download File</a><br />
                    {% if extra.extradescr %}({{ extra.extradescr }}){% endif %}
                </td>
                <tr>
                    <td colspan="3"></td>
                </tr>
            </tr>                       
            {% endfor %}
        </table>
        <br />
        <br />        
        <h4>Boxscans:</h4>
        <table class="images">
            <tr>
            {% for img in images %}
                <td style="vertical-align: top">{{ img.get_imgtype_display }}<br />
                    {% if img.imgdescr %}{{ img.imgdescr }}<br />{% endif %}</td>
                <td style="width: 15px;"></td>
            {% endfor %}
            </tr>
            <tr>
            {% for img in images %}
                <td><a href="https://archive.org/download/{{ release.archivelink }}/{{ img.imgfilename }}"><img src="https://archive.org/download/{{ release.archivelink }}/{{ img.imgfilename|preview }}" style="max-height: 350px;"></a><br></td>
                <td style="width: 15px;"></td>
            {% endfor %}         
            </tr>
        </table>
    </article>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
{% endblock %}